var ajax_call_post=function(e,a,n,o,t){return jQuery.ajax({type:"post",dataType:"json",url:ajaxUrl,data:e,success:function(e){if("success"==e.status)jQuery("div.alert.alert-danger").length&&jQuery("div.alert.alert-danger").remove(),o(e);else if("406"==e.code){var t=jQuery.parseJSON(e.msg);jQuery.each(t,function(e,t){if(jQuery("#"+e+"-error").length)jQuery("#"+e+"-error").html();else{var a='<label id="#'+e+'-error" class="error" for="'+e+'">'+t[0]+"</label>";jQuery(a).insertAfter("#"+e)}})}else jQuery("div.alert.alert-danger").length&&jQuery("div.alert.alert-danger").remove(),"after"===n?jQuery('<div class="alert alert-danger alert-dismissible"><a class="close" data-dismiss="alert" aria-label="close">&times;</a><strong>Error!</strong> '+e.msg+"</div>").insertAfter(a):jQuery('<div class="alert alert-danger alert-dismissible"><a class="close" data-dismiss="alert" aria-label="close">&times;</a><strong>Error!</strong> '+e.msg+"</div>").insertBefore(a)},complete:function(e){void 0!==t&&t(e)}})};function myMap(){var o=new google.maps.Geocoder;if(jQuery("#map").length){var r=document.getElementById("storeFullAddress"),i=document.getElementById("latitute"),l=document.getElementById("lognitute"),e=document.getElementById("map"),t=new google.maps.LatLng(27.700769,85.30014),a=12;0!==location_Lat&&(t=new google.maps.LatLng(location_Lat,location_Lan),a=16);var n={center:t,zoom:a},s=new google.maps.Map(e,n),c=new google.maps.Marker({position:t,map:s,title:"Hello World!"});google.maps.event.addListener(s,"click",function(e){var t,a=e.latLng.lat(),n=e.latLng.lng();i.value=a,l.value=n,location_Lat=a,location_Lan=n,c.setPosition(e.latLng),s.panTo(new google.maps.LatLng(a,n)),t=e.latLng,o.geocode({latLng:t},function(e,t){t==google.maps.GeocoderStatus.OK?e[0]?(console.log(e),jQuery("#selected_location_label").html(e[0].formatted_address),jQuery("#change_location_btn .btn_location_text").html(e[0].formatted_address),r.value=e[0].formatted_address):console.log("No results"):(console.log(t),document.getElementById("address").value=t)})});var d=document.getElementById("pac-input"),g=new google.maps.places.SearchBox(d);s.controls[google.maps.ControlPosition.TOP_LEFT].push(d),s.addListener("bounds_changed",function(){g.setBounds(s.getBounds())}),g.addListener("places_changed",function(){var e=g.getPlaces();if(0!==e.length){var t=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(c.setPosition(e.geometry.location),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)):console.log("Returned place contains no geometry")}),s.fitBounds(t)}})}}jQuery(".make_product_feature").on("click",function(){var e=jQuery(this).data("product_id");ajax_call_post({action:"gsn_make_product_feature",product_id:e},"","",function(e){location.reload()})}),jQuery(document).on("click",".cart-product-remove .remove-link",function(e){e.preventDefault(),jQuery(this).parents(".cart__list-cntr");var t=jQuery(this).data("cart-item-key");ajax_call_post({action:"gsn_remove_item_from_cart",item_key:t},"","",function(e){jQuery(".cart__content .cart__list").html(e.item_html),jQuery(".cart__content .total__cost").html(e.cart_total),jQuery(".cart__icon .cart-indicator").html(e.qty)},function(){})}),jQuery(document).click(function(e){jQuery(e.target).closest(".item__cart  .cart.cart-cntr").length||jQuery(".item__cart .cart__content").is(":visible")&&(jQuery(".item__cart .cart__content").slideUp(),$(".theme-toggle__content--cart-overlay").removeClass("nav-active")),jQuery(e.target).closest(".item__search  .search.search-cntr").length||jQuery(".item__search .search__content").is(":visible")&&(jQuery(".item__search .search__content").slideUp(),$(".theme-toggle__content--search-overlay").removeClass("nav-active"))}),jQuery(".remove_product_feature").on("click",function(){var e=jQuery(this).data("product_id");ajax_call_post({action:"gsn_remove_product_feature",product_id:e},"","",function(e){console.log(e)})}),jQuery("#logoutBtn").on("click",function(e){ajax_call_post({action:"gsn_store_logout"},"","",function(e){if("success"==e.status)return window.location.href=e.redirectUrl,!1})}),jQuery(document).ready(function(e){var i,t,a;if(jQuery(".upload-image-button").click(function(e){e.preventDefault();var t=jQuery(this);(i=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",function(){attachment=i.state().get("selection").first().toJSON(),t.parents("div.upload_cntr").find(".image_id").val(attachment.id),t.parent("div.upload_cntr").find(".image_src").attr("src",attachment.url)}),i.open()}),jQuery(".upload-button-multiple").click(function(e){e.preventDefault();var r=jQuery(this);(i=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!0})).on("select",function(){var a;if(selection=i.state().get("selection"),jQuery("#image_ids").length){var e=r.parents("div.upload_cntr").find("#image_ids").val();a=e.split(",")}var n="";if(selection.map(function(e){var t=e.toJSON();-1===a.indexOf(String(t.id))&&(0,a.push(t.id),n+='<span class="attachment-span"><img src=\''+t.url+"'><i class=\"remove_attachment_gallery\" data-pic-id='"+t.id+"' >remove</i></span>")}),jQuery("#product_image_gallery_limit").length){var t=a.filter(function(e){return""!==e}),o=jQuery("#product_image_gallery_limit").val();if(o<t.length)return n='<div class="alert alert-warning"> <strong>Warning!</strong> you can only choose up to '+o+" images .</div>",r.parents("div.upload_cntr").find(".gallery_image_cntr").append(n),!1}r.parents("div.upload_cntr").find(".gallery_image_cntr .alert-warning").remove(),r.parents("div.upload_cntr").find(".gallery_image_cntr").append(n),r.parents("div.upload_cntr").find("#image_ids").val(a.join())}),i.open()}),$(window).on("resize",function(){$(window).innerWidth()<=600&&(jQuery(".item__cart .cart__content").is(":visible")&&$(".theme-toggle__content--cart-overlay").addClass("nav-active"),jQuery(".item__search .search__content").is(":visible")&&$(".theme-toggle__content--search-overlay").addClass("nav-active"))}),jQuery(".item__cart  .cart__icon a").on("click",function(e){e.preventDefault(),jQuery(this).parents(".cart-cntr").find(".cart__content").slideToggle(),$(window).innerWidth()<=600&&$(".theme-toggle__content--cart-overlay").toggleClass("nav-active")}),jQuery(".item__search  .search-icon a").on("click",function(e){e.preventDefault(),jQuery(this).parents(".search-cntr").find(".search__content").slideToggle(),$(window).innerWidth()<=600&&$(".theme-toggle__content--search-overlay").toggleClass("nav-active")}),$(document).on("scroll",function(){var e=$(this).scrollTop(),t=$(".back-to-top"),a=$(".header__top").height(),n=$(".header__bottom");400<e?t.fadeIn():t.fadeOut(),a<=e?n.addClass("stick"):n.removeClass("stick")}),$(".back-to-top").on("click",function(e){e.preventDefault(),$("body, html").animate({scrollTop:0},600)}),$(".dashboard__hamburger--icon").on("click",function(e){e.preventDefault(),$(this).toggleClass("nav-active"),$(this).parents(".dashboard-header").toggleClass("nav-open")}),$(".dashboard-nav-overlay").on("click",function(){$(".dashboard__hamburger--icon").removeClass("active"),$(".dashboard-header").removeClass("nav-open")}),t=$(".category-lists"),a=$("ul.children").closest(".cat-item"),0<t.length&&(a.append('<i class="fa fa-angle-down toggle-cat-drop"></i>'),$(".toggle-cat-drop").on("click",function(){$(this).toggleClass("active"),$(this).prev("ul.children").slideToggle(300)})),0<$(".landing-hero-cntr").length){var n=$(".landing-hero-cntr"),o=n.find("#landing__tab li a"),r=n.find("#about-btn"),l=n.find("#landing-form-cntr"),s=n.find("#wipe-block"),c=n.find(".close-form-cntr a"),d=n.find(".landing__tab-content"),g=d.find(".form__message a"),u=n.find("#gridSystemModal"),m=function(){n.height($(window).innerHeight())};m(),window.addEventListener("resize",m);$(o).on("click",function(e){e.preventDefault(),$(s).hasClass("wipeSlide")&&s.removeClass("wipeSlide").addClass("open-form"),s.addClass("open-form"),l.toggleClass("open-form");var t=$(this.hash);t.length&&(setTimeout(function(){d.addClass("forms-active")},300),t.addClass("opened"))});$(r).on("click",function(e){e.preventDefault(),$(s).hasClass("wipeSlide")&&s.removeClass("wipeSlide").addClass("wipeRight"),s.addClass("wipeRight"),l.addClass("about-section"),l.toggleClass("open-form");var t=$(this.hash);t.length&&(setTimeout(function(){d.addClass("forms-active")},300),t.addClass("opened"))});$(c).on("click",function(e){e.preventDefault(),$(s).hasClass("open-form")?s.removeClass("open-form"):$(s).hasClass("wipeRight")&&s.removeClass("wipeRight").addClass("wipeSlide"),$(l).hasClass("about-section")&&setTimeout(function(){l.removeClass("about-section")},800),l.removeClass("open-form"),d.removeClass("forms-active"),$(d).hasClass("opened")&&$(".landing__tab-content").removeClass("opened")});$(g).on("click",function(e){e.preventDefault();var t=$(this.hash);t.length&&$(".landing__tab-content").hasClass("opened")&&($(".landing__tab-content.opened").removeClass("opened"),t.addClass("opened"))});$(".location-btn").on("click",function(e){e.preventDefault(),u.addClass("open-modal")});var _=function(){u.removeClass("open-modal")};$("#close-map-modal").on("click",function(e){e.preventDefault(),_()}),$(".btn-set-location").on("click",function(){""===$("#storeFullAddress").val().trim()?$(".alert.alert-danger").length||$(this).parent().prepend('<span class="map--error fl"> Please select location</span>'):($("#set_location_btn").hide(),$("#change_location_btn").show(),$(this).parent().find(".alert").remove(),_())})}if(0<$(".gsn-header").length){$(".gsn-header");var p=$(".header__bottom"),h=$(".theme__hamburger--icon"),v=$(".menu-store-header-menu-container"),f=v.find("#menu-store-header-menu li.has__dropdown"),y=$(".item__search"),C=$(".item__cart"),j=$(".theme-nav-overlay"),w="nav-active";h.on("click",function(e){e.preventDefault(),y.toggleClass(w),C.toggleClass(w),j.toggleClass(w),$(this).toggleClass(w),v.slideToggle()});j.on("click",function(){v.slideUp(),y.removeClass(w),C.removeClass(w),j.removeClass(w),h.removeClass(w)});var b=function(){$(window).innerWidth()<=800?v.css({"max-height":$(window).innerHeight()-p.innerHeight()}):v.css({"max-height":"inherit"})};b(),window.addEventListener("resize",b);f&&$('<i class="fa fa-angle-down toggle-sub-nav mobile"></i>').insertAfter(f.find(".dropdown__link"));$(".toggle-sub-nav").on("click",function(){$(this).toggleClass(w),$(this).next().children("ul").slideToggle()})}$(".list__item--toggle").length&&$(".list__item--toggle").on("click",function(e){e.preventDefault(),$(this).toggleClass("toggle-cat"),$(this).next().slideToggle()})}),$(window).on("load",function(){$("#wipe-block").css({opacity:1,visibility:"visible"})}),jQuery(document).ready(function(e){myMap()});